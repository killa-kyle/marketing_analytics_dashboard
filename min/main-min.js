gapi.analytics.ready(function(){function t(t){var a=moment(),e=r({ids:t,dimensions:"ga:date,ga:nthDay",metrics:"ga:sessions","start-date":moment(a).subtract(1,"day").day(0).format("YYYY-MM-DD"),"end-date":moment(a).format("YYYY-MM-DD")}),n=r({ids:t,dimensions:"ga:date,ga:nthDay",metrics:"ga:sessions","start-date":moment(a).subtract(1,"day").day(0).subtract(1,"week").format("YYYY-MM-DD"),"end-date":moment(a).subtract(1,"day").day(6).subtract(1,"week").format("YYYY-MM-DD")});Promise.all([e,n]).then(function(t){var a=t[0].rows.map(function(t){return+t[2]}),e=t[1].rows.map(function(t){return+t[2]}),n=t[1].rows.map(function(t){return+t[0]});n=n.map(function(t){return moment(t,"YYYYMMDD").format("ddd")});for(var o=0;7>o;o++)(null==a[o]||void 0==a[o])&&(a[o]=0);var r={labels:n,datasets:[{label:"Last Week",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:e},{label:"This Week",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:a}]};new Chart(s("chart-1-container")).Bar(r),i("legend-1-container",r.datasets)})}function a(t){var a=moment(),e=r({ids:t,dimensions:"ga:month,ga:nthMonth",metrics:"ga:users","start-date":moment(a).date(1).month(0).format("YYYY-MM-DD"),"end-date":moment(a).format("YYYY-MM-DD")}),n=r({ids:t,dimensions:"ga:month,ga:nthMonth",metrics:"ga:users","start-date":moment(a).subtract(1,"year").date(1).month(0).format("YYYY-MM-DD"),"end-date":moment(a).date(1).month(0).subtract(1,"day").format("YYYY-MM-DD")});Promise.all([e,n]).then(function(t){for(var a=t[0].rows.map(function(t){return+t[2]}),e=t[1].rows.map(function(t){return+t[2]}),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=0,r=n.length;r>o;o++)void 0===a[o]&&(a[o]=null),void 0===e[o]&&(e[o]=null);var l={labels:n,datasets:[{label:"Last Year",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",data:e},{label:"This Year",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",data:a}]};new Chart(s("chart-2-container")).Bar(l),i("legend-2-container",l.datasets)})["catch"](function(t){console.error(t.stack)})}function e(t){r({ids:t,dimensions:"ga:browser",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":5}).then(function(t){var a=[],e=["#4D5360","#949FB1","#D4CCC5","#E2EAE9","#F7464A"];t.rows.forEach(function(t,n){a.push({value:+t[1],color:e[n],label:t[0]})}),new Chart(s("chart-3-container")).Doughnut(a),i("legend-3-container",a)})}function n(t){var a=moment(),e=r({ids:t,dimensions:"ga:channelGrouping",metrics:"ga:sessions,ga:goal1ConversionRate,ga:goal1Completions",sort:"-ga:sessions","start-date":moment(a).subtract(1,"day").day(0).format("YYYY-MM-DD"),"end-date":moment(a).format("YYYY-MM-DD"),"max-results":7}),n=r({ids:t,dimensions:"ga:channelGrouping",metrics:"ga:sessions",sort:"-ga:sessions","start-date":moment(a).subtract(1,"day").day(0).subtract(1,"week").format("YYYY-MM-DD"),"end-date":moment(a).subtract(1,"day").day(6).subtract(1,"week").format("YYYY-MM-DD"),"max-results":7}),o=r({ids:t,dimensions:"ga:channelGrouping",metrics:"ga:sessions",sort:"-ga:sessions","start-date":moment(a).subtract(1,"months").startOf("month").format("YYYY-MM-DD"),"end-date":moment(a).subtract(1,"months").endOf("month").format("YYYY-MM-DD"),"max-results":7});console.log(e),Promise.all([e,n,o]).then(function(t){var a=t[0].rows.map(function(t){return t}),e=t[1].rows.map(function(t){return t}),n=t[2].rows.map(function(t){return t}),o=new Array(3);o[0]=a,o[1]=e,o[2]=n;var r=[],l=["#4D5360","#949FB1","#D4CCC5","#E2EAE9","#F7464A","#bada55","#e6711b"];o[0].forEach(function(t,a){r.push({label:t[0],value:+t[1],color:l[a]})});for(var c=0;c<o[0].length;c++){console.log("Channel Name:",o[0][c][1].toLocaleString("en-US"));var d=o[0][c][0],m=parseInt(o[0][c][1]).toLocaleString(),u=parseInt(o[0][c][3]).toLocaleString(),g=parseInt(o[1][c][1]).toLocaleString(),f=parseInt(o[2][c][1]).toLocaleString();$("#channels").append('<tr class="channel-row"><td>'+d+"</td><td>"+m+"<span>("+u+")(thisWeekRate)</span></td><td>"+g+"</td><td>"+f+"</td></tr>")}$("#channels").append("<tr><td><strong>TOTAL:</strong></td><td></td><td></td><td></td></tr>"),new Chart(s("chart-4-container")).Doughnut(r),i("legend-4-container",r)})}function o(t){var a=moment(),e=r({ids:t,dimensions:"ga:date,ga:nthDay",metrics:"ga:sessions","start-date":moment(a).subtract(1,"day").day(0).format("YYYY-MM-DD"),"end-date":moment(a).format("YYYY-MM-DD")}),n=r({ids:t,dimensions:"ga:date,ga:nthDay",metrics:"ga:sessions","start-date":moment(a).subtract(1,"day").day(0).subtract(1,"week").format("YYYY-MM-DD"),"end-date":moment(a).subtract(1,"day").day(6).subtract(1,"week").format("YYYY-MM-DD")});Promise.all([e,n]).then(function(t){var a=t[0].rows.map(function(t){return+t[2]}),e=t[1].rows.map(function(t){return+t[2]}),n=t[1].rows.map(function(t){return+t[0]});n=n.map(function(t){return moment(t,"YYYYMMDD").format("ddd")});var o={labels:n,datasets:[{label:"Last Week",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:e},{label:"This Week",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:a}]};new Chart(s("chart-1-container")).Line(o),i("legend-1-container",o.datasets)})}function r(t){return new Promise(function(a,e){var n=new gapi.analytics.report.Data({query:t});n.once("success",function(t){a(t)}).once("error",function(t){e(t)}).execute()})}function s(t){var a=document.getElementById(t),e=document.createElement("canvas"),n=e.getContext("2d");return a.innerHTML="",e.width=a.offsetWidth,e.height=a.offsetHeight,a.appendChild(e),n}function i(t,a){var e=document.getElementById(t);e.innerHTML=a.map(function(t){var a=t.color||t.fillColor,e=t.label;return'<li><i style="background:'+a+'"></i>'+e+"</li>"}).join("")}gapi.analytics.auth.authorize({container:"embed-api-auth-container",clientid:"476592068856-ki5v355o2t1pthp0h73s6bgddm3v0i80.apps.googleusercontent.com"});var l=new gapi.analytics.ext.ActiveUsers({container:"active-users-container",pollingInterval:5});l.once("success",function(){var t=this.container.firstChild,a;this.on("change",function(t){var e=this.container.firstChild,n=t.delta>0?"is-increasing":"is-decreasing";e.className+=" "+n,clearTimeout(a),a=setTimeout(function(){e.className=e.className.replace(/ is-(increasing|decreasing)/g,"")},3e3)})});var c=new gapi.analytics.ext.ViewSelector2({container:"view-selector-container"}).execute();c.on("viewChange",function(o){var r=document.getElementById("view-name");r.innerHTML=o.property.name+" ("+o.view.name+")",l.set(o).execute(),t(o.ids),a(o.ids),e(o.ids),n(o.ids)}),Chart.pluginService.register({beforeRender:function(t){t.config.options.showAllTooltips&&(t.pluginTooltips=[],t.config.data.datasets.forEach(function(a,e){t.getDatasetMeta(e).data.forEach(function(a,e){t.pluginTooltips.push(new Chart.Tooltip({_chart:t.chart,_chartInstance:t,_data:t.data,_options:t.options,_active:[a]},t))})}),t.options.tooltips.enabled=!1)},afterDraw:function(t,a){if(t.config.options.showAllTooltips){if(!t.allTooltipsOnce){if(1!==a)return;t.allTooltipsOnce=!0}t.options.tooltips.enabled=!0,Chart.helpers.each(t.pluginTooltips,function(t){t.initialize(),t.update(),t.pivot(),t.transition(a).draw()}),t.options.tooltips.enabled=!1}}}),Chart.defaults.global.animationSteps=60,Chart.defaults.global.animationEasing="easeInOutQuart",Chart.defaults.global.responsive=!0,Chart.defaults.global.maintainAspectRatio=!1});